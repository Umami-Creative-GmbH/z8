# ===========================================
# Environment Variables Template
# ===========================================
# Copy this file to .env.local and fill in your values
# Required variables are marked with [REQUIRED]
# Optional variables have sensible defaults

# ===========================================
# Application
# ===========================================
# [REQUIRED] Public URL of the application
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Base URL for Better Auth (defaults to NEXT_PUBLIC_APP_URL)
BETTER_AUTH_URL=http://localhost:3000

# [REQUIRED] Secret key for Better Auth session cookies
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=

# Node environment (development, production, test)
NODE_ENV=development

# ===========================================
# Database (PostgreSQL) [REQUIRED]
# ===========================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=your_database
POSTGRES_USER=your_username
POSTGRES_PASSWORD=your_password

# ===========================================
# OAuth Providers (Optional - enable as needed)
# ===========================================

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# GitHub OAuth
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# LinkedIn OAuth
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=

# Apple OAuth
APPLE_CLIENT_ID=
APPLE_CLIENT_SECRET=

# ===========================================
# Passkeys / WebAuthn
# ===========================================
# Relying Party ID for passkeys (usually your domain, e.g., "example.com")
PASSKEY_RP_ID=localhost

# ===========================================
# Email (Resend)
# ===========================================
# API key for Resend email service
RESEND_API_KEY=

# From address for outgoing emails
EMAIL_FROM=noreply@yourdomain.com

# ===========================================
# Web Push Notifications (VAPID)
# ===========================================
# Generate keys with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_SUBJECT=mailto:support@example.com

# ===========================================
# S3 Storage [REQUIRED]
# ===========================================
# S3-compatible object storage is REQUIRED for file uploads.
# Use RustFS (included in docker-compose) or external provider (AWS S3, Cloudflare R2, MinIO)
#
# For local development with RustFS:
#   1. Start RustFS: docker compose up -d rustfs
#   2. Use the defaults below (works out of the box)
#
# For production:
#   - Consider AWS S3, Cloudflare R2, or managed MinIO for durability
#   - Set S3_PUBLIC_URL to your CDN endpoint for optimal performance

# Bucket name (will be auto-created on startup if it doesn't exist)
S3_BUCKET=z8-uploads

# Access credentials (for RustFS, use rustfsadmin/rustfsadmin)
S3_ACCESS_KEY_ID=rustfsadmin
S3_SECRET_ACCESS_KEY=rustfsadmin

# S3 endpoint URL
# RustFS local: http://localhost:9000
# AWS S3: https://s3.us-east-1.amazonaws.com
# Cloudflare R2: https://<account_id>.r2.cloudflarestorage.com
S3_ENDPOINT=http://localhost:9000

# AWS region (required for AWS S3, optional for others)
S3_REGION=us-east-1

# Force path-style URLs (required for RustFS/MinIO, set to "false" for AWS S3)
S3_FORCE_PATH_STYLE=true

# Public URL for accessing uploaded files
# For RustFS local: http://localhost:9000/z8-uploads
# For production: Use CDN URL or direct bucket URL
S3_PUBLIC_URL=http://localhost:9000/z8-uploads

# ===========================================
# Tolgee (i18n - Optional)
# ===========================================
# For Tolgee CLI
TOLGEE_PROJECT_ID=
TOLGEE_API_URL=
TOLGEE_API_KEY=

# Public keys for client-side Tolgee
NEXT_PUBLIC_TOLGEE_API_KEY=
NEXT_PUBLIC_TOLGEE_API_URL=

# ===========================================
# Audit Logging (Optional)
# ===========================================
# External audit service configuration
# Options: none, custom
AUDIT_SERVICE=none
AUDIT_ENDPOINT=
AUDIT_API_KEY=

# ===========================================
# OpenTelemetry (Optional)
# ===========================================
# OTLP endpoint for traces and metrics
OTEL_EXPORTER_OTLP_ENDPOINT=

# ===========================================
# Logging
# ===========================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# ===========================================
# Valkey/Redis (Session Caching)
# ===========================================
# Optional - improves session performance significantly
# Falls back to localhost:6379 in development
VALKEY_HOST=localhost
VALKEY_PORT=6379
# VALKEY_PASSWORD=

# ===========================================
# Cron Jobs
# ===========================================
# Secret for authenticating cron job requests
CRON_SECRET=

# ===========================================
# HashiCorp Vault (Secrets Management)
# ===========================================
# Required for per-organization email configuration
#
# First-time setup (run from deploy/compose/):
#   1. docker compose up -d vault
#   2. docker compose exec vault vault operator init -key-shares=1 -key-threshold=1
#   3. Save the Unseal Key and Root Token
#   4. docker compose exec vault vault operator unseal <UNSEAL_KEY>
#   5. Set VAULT_TOKEN below to the Root Token
#
# Or from repo root: pnpm docker:up (starts all services)
# After restart, unseal with: docker compose exec vault vault operator unseal <UNSEAL_KEY>
# For production, use auto-unseal with cloud KMS
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=
