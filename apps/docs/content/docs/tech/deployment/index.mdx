---
title: Deployment
description: Hosting and configuration guide for Z8
---

This section covers deployment and hosting configuration for the Z8 Team Management System.

## Overview

Z8 consists of multiple applications that can be deployed independently:

| Application | Technology | Deployment Target |
|-------------|------------|-------------------|
| Web App | Next.js | Vercel, Docker, Node.js |
| Mobile App | Expo/React Native | App Store, Google Play |
| Desktop App | Tauri | Windows, macOS, Linux |

## Web Application

### Environment Variables

The web application requires the following environment variables:

```ini
# Database
DATABASE_URL=postgres://...

# Authentication
BETTER_AUTH_SECRET=<generated-secret>
BETTER_AUTH_URL=https://your-domain.com

# Push Notifications (optional)
VAPID_PUBLIC_KEY=<generated-key>
VAPID_PRIVATE_KEY=<generated-key>
VAPID_SUBJECT=mailto:support@yourdomain.com
```

### Vercel Deployment

1. Connect your repository to Vercel
2. Configure environment variables
3. Set the root directory to `apps/webapp`
4. Deploy

### Docker Deployment

A Dockerfile is available for containerized deployments:

```bash
docker build -t z8-webapp ./apps/webapp
docker run -p 3000:3000 z8-webapp
```

## Mobile Application

### Building for App Stores

```bash
# iOS
cd apps/mobile
eas build --platform ios

# Android
eas build --platform android
```

## Desktop Application

### Building Installers

```bash
cd apps/desktop
bun run build
```

This produces installers for Windows (.msi), macOS (.dmg), and Linux (.deb, .AppImage).

## Database

Z8 uses PostgreSQL with Drizzle ORM. Run migrations with:

```bash
cd apps/webapp
bun run db:migrate
```

### Database Seeding

After running migrations, seed the database with initial data (time regulation presets, etc.):

```bash
cd apps/webapp
bun run db:seed
```

#### Seed CLI Options

| Command | Description |
|---------|-------------|
| `bun run db:seed` | Run all seeders |
| `bun run db:seed --list` | List available seeders |
| `bun run db:seed --only=<name>` | Run a specific seeder |
| `bun run db:seed --help` | Show help |

#### Available Seeders

| Seeder | Description |
|--------|-------------|
| `time-regulation-presets` | Labor law presets (German, EU, French, UK, Swiss, Austrian) |

#### Idempotent Seeding

All seeders are **idempotent**â€”safe to run multiple times. Existing records are skipped, so you can re-run seeding without duplicating data.

#### Production Seeding

For production deployments, run seeding as part of your deployment pipeline:

```bash
# After migrations
bun run db:migrate

# Seed initial data
bun run db:seed
```

Or run directly:

```bash
bun --bun run src/db/seed/do-seed.ts
```

## Storage (Optional)

For file uploads and exports, configure S3-compatible storage:

```ini
S3_BUCKET=your-bucket
S3_REGION=eu-central-1
S3_ACCESS_KEY_ID=<access-key>
S3_SECRET_ACCESS_KEY=<secret-key>
S3_ENDPOINT=https://s3.amazonaws.com  # Or MinIO, R2, etc.
```

## Valkey/Redis Configuration

Z8 uses Valkey (Redis-compatible) for job queues, rate limiting, and real-time pub/sub.

### Environment Variables

```ini
# Valkey/Redis connection
VALKEY_URL=redis://localhost:6379
# Or with authentication
VALKEY_URL=redis://:password@localhost:6379

# For Upstash (serverless)
UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=<your-token>
```

### Features Requiring Valkey

| Feature | Purpose |
|---------|---------|
| Job Queue (BullMQ) | Background job processing |
| Rate Limiting | API request throttling |
| Real-time Notifications | Pub/sub for SSE |
| Session Store (optional) | Distributed session storage |

### Self-Hosted Valkey

```bash
# Docker
docker run -d --name valkey -p 6379:6379 valkey/valkey:latest

# With persistence
docker run -d --name valkey -p 6379:6379 \
  -v valkey-data:/data \
  valkey/valkey:latest \
  valkey-server --appendonly yes
```

## Worker Process Deployment

For background job processing, deploy a separate worker process.

### Worker Configuration

```bash
# Start worker process
bun run worker

# Or with specific queues
QUEUES=exports,reports bun run worker
```

### Docker Compose Example

```yaml
services:
  webapp:
    build: ./apps/webapp
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - VALKEY_URL=redis://valkey:6379

  worker:
    build: ./apps/webapp
    command: bun run worker
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - VALKEY_URL=redis://valkey:6379

  valkey:
    image: valkey/valkey:latest
    volumes:
      - valkey-data:/data
```

### Scaling Workers

For high-load environments, scale workers horizontally:

```bash
# Multiple worker instances
docker-compose up -d --scale worker=3
```

Each worker processes jobs from the queue independently.

## Desktop App Distribution

### Building for Distribution

```bash
cd apps/desktop
bun run build
```

This produces platform-specific installers in `apps/desktop/src-tauri/target/release/bundle/`:

| Platform | Output |
|----------|--------|
| Windows | `.msi`, `.exe` |
| macOS | `.dmg`, `.app` |
| Linux | `.deb`, `.AppImage`, `.rpm` |

### Code Signing

For production distribution, configure code signing:

**Windows:**
```ini
# In tauri.conf.json or environment
TAURI_SIGNING_PRIVATE_KEY=<your-key>
TAURI_SIGNING_PRIVATE_KEY_PASSWORD=<password>
```

**macOS:**
```ini
APPLE_SIGNING_IDENTITY="Developer ID Application: Your Company"
APPLE_ID=your@email.com
APPLE_PASSWORD=<app-specific-password>
APPLE_TEAM_ID=<team-id>
```

### Distribution Channels

- **Direct download**: Host installers on your website or CDN
- **Windows**: Microsoft Store (optional)
- **macOS**: Notarization required for distribution outside App Store
- **Linux**: Package repositories or AppImage hosting

## Health Checks

Configure your orchestrator to use these health endpoints:

| Endpoint | Purpose |
|----------|---------|
| `GET /api/health` | Overall system health |
| `GET /api/health/db` | Database connectivity |
| `GET /api/health/ready` | Readiness probe for load balancers |

## Cron Jobs

Set up scheduled jobs for:

| Endpoint | Schedule | Description |
|----------|----------|-------------|
| `/api/cron/reminders` | Daily | Time tracking reminders |
| `/api/cron/reports` | Weekly | Scheduled report generation |
| `/api/cron/cleanup` | Daily | Cleanup of expired data |
| `/api/cron/project-deadlines` | Daily | Project deadline notifications |

## Monitoring

The application includes instrumentation for monitoring:

- Response time metrics
- Error rate tracking
- Database query performance
- Background job queue status

## Additional Resources

- [Technical Docs](/docs/tech/technical) - Development setup and architecture
- [Admin Guide](/docs/ui/admin-guide) - System configuration after deployment
- [Health Monitoring](/docs/ui/admin-guide/system-administration) - Monitoring setup
